FROM ubuntu:16.04

RUN sed -i 's/archive.ubuntu.com/mirrors.ustc.edu.cn/g' /etc/apt/sources.list \
    && apt-get clean \
    && apt-get update \
    && apt-get install -yq --no-install-recommends \
    python3 \
    python3-pip
# RUN pip3 install --upgrade pip==10.0.0 \
#     && pip3 install setuptools

RUN pip3 install setuptools -i https://mirrors.ustc.edu.cn/pypi/web/simple

# for flask web server
EXPOSE 5000

# set working directory
ADD . /SSD_app
WORKDIR /SSD_Flask_new

# install required libraries
COPY requirements.txt ./
RUN pip3 install -r requirements.txt -i https://mirrors.ustc.edu.cn/pypi/web/simple

# This is the runtime command for the container
CMD /bash/bin
